"use strict";(self["webpackChunkinspection_admin"]=self["webpackChunkinspection_admin"]||[]).push([[567],{1373:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(641),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};const o=a;var u=n(9613);function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e,t){var n=s({},e,t.attrs);return(0,r.bF)(u.A,s({},n,{icon:o}),null)};c.displayName="UserOutlined",c.inheritAttrs=!1;const i=c},2549:(e,t,n)=>{n.d(t,{N6:()=>f,TK:()=>c,aU:()=>s,bV:()=>d,hG:()=>i,iD:()=>a,nu:()=>l,ri:()=>u,ug:()=>o});var r=n(5659);function a(e){return(0,r.A)({url:"/auth/login",method:"post",data:e})}function o(){return(0,r.A)({url:"/users/info",method:"get"})}function u(){return(0,r.A)({url:"/auth/logout",method:"post"})}function s(e){return(0,r.A)({url:"/users",method:"get",params:e})}function l(e){return(0,r.A)({url:"/users",method:"post",data:e})}function c(e,t){return(0,r.A)({url:`/users/${e}`,method:"put",data:t})}function i(e){return(0,r.A)({url:`/users/${e}`,method:"delete"})}function d(e){return(0,r.A)({url:`/users/${e}/permissions`,method:"get"})}function f(e,t){return(0,r.A)({url:`/users/${e}/permissions`,method:"put",data:t})}},6567:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(641),a=n(33),o=n(6132);const u={class:"user-info"},s={class:"container"};function l(e,t,n,l,c,i){const d=(0,r.g2)("a-menu-item"),f=(0,r.g2)("a-menu"),h=(0,r.g2)("user-outlined"),p=(0,r.g2)("down-outlined"),g=(0,r.g2)("a-dropdown"),m=(0,r.g2)("a-layout-header"),y=(0,r.g2)("router-view"),b=(0,r.g2)("a-layout-content"),k=(0,r.g2)("a-layout-footer"),v=(0,r.g2)("a-layout");return(0,r.uX)(),(0,r.Wv)(v,{class:"layout"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{class:"header"},{default:(0,r.k6)((()=>[t[3]||(t[3]=(0,r.Lk)("div",{class:"logo"},"巡检管理系统后台",-1)),(0,r.bF)(f,{selectedKeys:l.selectedKeys,"onUpdate:selectedKeys":t[0]||(t[0]=e=>l.selectedKeys=e),theme:"light",mode:"horizontal",style:{lineHeight:"56px"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.menuItems,(e=>((0,r.uX)(),(0,r.Wv)(d,{key:e.key,onClick:()=>l.navigateTo(e.path)},{default:(0,r.k6)((()=>[(0,r.eW)((0,a.v_)(e.label),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["selectedKeys"]),(0,r.Lk)("div",u,[(0,r.bF)(g,null,{overlay:(0,r.k6)((()=>[(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,{key:"0"},{default:(0,r.k6)((()=>[(0,r.Lk)("a",{onClick:t[2]||(t[2]=(...e)=>l.handleLogout&&l.handleLogout(...e))},"退出登录")])),_:1})])),_:1})])),default:(0,r.k6)((()=>[(0,r.Lk)("a",{class:"ant-dropdown-link",onClick:t[1]||(t[1]=(0,o.D$)((()=>{}),["prevent"]))},[(0,r.bF)(h),(0,r.eW)(" "+(0,a.v_)(l.userInfo.name)+" ",1),(0,r.bF)(p)])])),_:1})])])),_:1,__:[3]}),(0,r.bF)(b,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",s,[(0,r.bF)(y)])])),_:1}),(0,r.bF)(k,{class:"footer"},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)(" © 2025 巡检管理系统后台 ")]))),_:1,__:[4]})])),_:1})}var c=n(953),i=n(5220),d=n(1373),f=n(7950),h=n(8787),p=n(2549);const g={name:"Layout",components:{UserOutlined:d.A,DownOutlined:f.A},setup(){const e=(0,i.rd)(),t=(0,i.lq)(),n=(0,c.KR)({name:"管理员"}),a=[{key:"dashboard",label:"仪表盘",path:"/"},{key:"records",label:"巡检记录",path:"/records"},{key:"issues",label:"问题列表",path:"/issues"},{key:"users",label:"用户管理",path:"/users"}],o=(0,r.EW)((()=>{const e=t.path;return"/"===e?["dashboard"]:[e.split("/")[1]]})),u=t=>{e.push(t)},s=async()=>{try{await(0,p.ri)(),localStorage.removeItem("token"),h.Ay.success("退出登录成功"),e.push("/login")}catch(t){console.error("Logout failed:",t)}};return(0,r.sV)((async()=>{try{const e=await(0,p.ug)();n.value=e}catch(e){console.error("Failed to get user info:",e)}})),{menuItems:a,selectedKeys:o,userInfo:n,navigateTo:u,handleLogout:s}}};var m=n(6262);const y=(0,m.A)(g,[["render",l],["__scopeId","data-v-7757e936"]]),b=y}}]);
//# sourceMappingURL=567.11f899e6.js.map