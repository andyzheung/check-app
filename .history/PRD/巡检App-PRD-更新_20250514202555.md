# 巡检App 产品需求文档（PRD）

## 1. 产品概述
### 1.1 产品定位
面向企业内部的巡检管理移动应用，支持Android平台，主要用于机房环境巡检和安全巡检。

### 1.2 目标用户
- 巡检人员（普通用户）
- 管理员用户

## 2. 项目背景与目标
随着企业数字化转型的推进，传统的纸质巡检方式已无法满足高效、规范、可追溯的管理需求。为提升巡检效率、降低人为失误、实现数据实时采集与分析，需开发一款支持扫码、表单填写、任务管理、统计分析的移动巡检App。

## 3. 术语与定义
- 巡检任务：系统分配或用户自建的待巡检事项。
- 巡检区域：具体的巡检地点，如A区机房、B区机房等。
- 巡检表单：用于记录每次巡检结果的电子表单。
- 扫码：通过摄像头扫描二维码，快速定位设备或区域。

## 4. 总体描述
### 4.1 产品定位
面向企业运维、安保等场景，提供高效、智能、移动化的巡检管理工具。

### 4.2 用户角色
- 普通巡检员
- 管理员/主管

### 4.3 使用场景
- 日常巡检任务执行
- 现场扫码定位与表单填写
- 历史记录查询与统计分析

## 5. 功能需求
### 5.1 用户认证
- 支持企业AD账号登录
- 登录状态保持
- 记住密码功能
- 自动登出机制（可选）

### 5.2 主要功能模块
#### 5.2.1 巡检模块
- 扫码功能：支持扫描巡检区域二维码，二维码识别后自动定位到对应巡检区域
- 巡检表单：
  - 环境巡检项：机房温度（正常/异常）、冷通道回风温度（正常/异常）、供电情况（正常/异常）
  - 安全巡检项：门禁状态（正常/异常）、声光报警（正常/异常）、漏水检测（正常/异常）、易燃物检查（正常/异常）
  - 备注信息（可选）
  - 提交功能

#### 5.2.2 巡检记录模块
- 记录列表展示，按时间倒序排列，显示巡检区域、时间、巡检人
- 记录详情查看，显示所有巡检项状态及备注信息
- 记录筛选功能：按时间范围、巡检区域、巡检状态筛选

#### 5.2.3 个人中心模块
- 个人信息展示（用户名、部门信息、角色信息）
- 设置功能：消息通知设置、语言设置、主题设置、清除缓存、退出登录

### 5.3 权限管理
- 普通用户权限：执行巡检、查看个人巡检记录
- 管理员权限：查看所有巡检记录、导出巡检记录、巡检区域管理

### 5.4 首页与导航
- 显示今日任务、巡检区域
- 一键扫码开始巡检
- 底部导航栏（巡检、记录、我的）

### 5.5 记录与统计
- 巡检历史记录列表
- 记录详情查看
- 统计分析（如任务完成率、异常统计等）

### 5.6 消息与通知
- 系统消息推送
- 任务提醒

## 6. 技术架构
### 6.1 前端技术栈
- 开发语言：Java/Kotlin
- 开发框架：Android原生开发
- 主要功能模块：
  - 二维码扫描：ZXing
  - 网络请求：Retrofit + OkHttp
  - 数据存储：Room Database
  - 图片加载：Glide
- 移动端Web App（HTML5+CSS3+JavaScript）
- 响应式设计，兼容主流手机浏览器

### 6.2 后端技术栈
- 开发语言：Golang
- Web框架：Gin
- 数据库：MySQL
- 认证：AD集成
- API文档：Swagger
- RESTful API
- 用户、任务、表单、记录等数据管理

### 6.3 数据库设计
- 用户表、任务表、巡检记录表、区域表等

### 6.4 第三方服务集成
- 企业AD/LDAP认证
- 消息推送服务

## 7. 非功能需求
### 7.1 性能需求
- 应用启动时间 < 3秒
- 扫码响应时间 < 1秒
- 表单提交响应时间 < 2秒
- 页面加载时间<3s
- 支持高并发任务查询与提交

### 7.2 安全需求
- 数据传输加密（HTTPS）
- 本地数据加密存储
- 定期密码更新提醒
- 异常登录提醒
- 用户权限校验

### 7.3 可用性需求
- 支持离线工作模式
- 数据自动同步
- 异常情况自动重试
- 友好的错误提示
- 简洁友好的UI
- 操作流程清晰

### 7.4 兼容性
- 兼容主流安卓/iOS浏览器

### 7.5 可维护性
- 代码结构清晰，易于扩展

## 8. 交互与UI设计原则
- 参考微信等主流App风格，圆润、现代、简洁
- 重要操作按钮突出，流程引导明确

## 9. 项目规划
### 9.1 开发周期
- 第一阶段（2周）：基础框架搭建
- 第二阶段（3周）：核心功能开发
- 第三阶段（2周）：测试和优化
- 第四阶段（1周）：部署上线

### 9.2 测试计划
- 单元测试
- 集成测试
- 用户验收测试
- 性能测试

## 10. 数据流与流程图
- 任务分发-扫码-表单填写-提交-统计分析
- 相关流程图见详细设计文档

## 11. 后续优化方向
- 支持离线巡检
- 添加巡检提醒功能
- 支持巡检数据导出
- 添加巡检统计分析功能
- 支持图片上传功能
- 添加巡检异常自动报警功能

## 12. 附录
### 12.1 参考文档
- 企业信息化管理规范
- 相关行业标准

### 12.2 术语表
- 详见3.术语与定义 

## 13. 新增需求
### 13.1 Android App UI优化
- 参考Apple Design风格对UI进行重构优化，整体功能架构保持不变。

### 13.2 后台管理界面
- 使用Vue3框架实现，需要先设计原型，并补充到PRD文档。

### 13.3 后台后端开发
- 增加一个Java Spring Boot框架开发，请在工程下创建独立的文件夹，考虑到团队对Golang不熟悉，后续可能需要使用Java作为后端技术，所以目前暂时先和Gin的工程保持并行；Java的技术实现跟Gin的保持一致。

### 13.4 后台原型设计
- 后台的原型设计后，采用Ant Design UI设计界面原型。

## 14. 后台管理界面功能设计
### 14.1 登录页面
- 简洁现代的登录界面
- 支持账号密码登录
- 记住密码功能
- 忘记密码功能

### 14.2 仪表盘页面
- 累计数据展示：巡检次数、参与人数、问题数量、活跃人员
- 本周数据展示：巡检次数、参与人数、问题数量、活跃人员（含环比）
- 数据可视化：巡检趋势折线图、问题类型分布饼图、巡检人员排名柱状图
- 本周问题列表快速查看

### 14.3 巡检记录页面
- 多维度筛选：时间范围、巡检区域、巡检人员、巡检状态
- 表格展示巡检记录列表
- 支持查看巡检详情
- 巡检详情弹窗展示：基本信息、环境巡检项、安全巡检项、备注信息
- 支持数据导出功能

### 14.4 问题列表页面
- 多维度筛选：时间范围、问题类型、状态、处理人
- 表格展示问题列表
- 支持问题处理与状态更新
- 问题详情查看功能

### 14.5 用户管理页面
- 用户列表展示：用户名、姓名、部门、角色、状态、创建时间等信息
- 用户筛选功能：按用户名、部门、角色、状态筛选
- 用户添加/编辑功能：设置用户基本信息、部门、角色等
- 用户权限分配功能：细粒度权限控制
  - 仪表盘查看权限
  - 巡检记录查看权限
  - 查看所有巡检记录权限（否则只能查看自己的记录）
  - 巡检记录导出权限
  - 问题列表查看权限
  - 问题处理权限
  - 用户管理权限
  - 系统配置权限
- 用户删除功能

### 14.6 巡检区域管理
- 区域列表展示
- 区域添加/编辑/删除功能
- 区域二维码生成与打印功能

### 14.7 任务管理
- 任务列表展示
- 任务创建、编辑、删除功能
- 任务分配功能
- 任务状态跟踪

### 14.8 表单管理
- 表单模板列表
- 表单模板创建、编辑、删除功能
- 表单项自定义功能

### 14.9 统计分析
- 巡检数据统计报表
- 问题统计分析
- 人员工作量统计
- 数据导出功能

### 14.10 系统设置
- 基础参数配置
- 消息通知设置
- 系统日志查看

### 14.11 权限控制
- 基于角色的权限控制：管理员、普通用户
- 管理员可查看所有记录，普通用户只能查看自己的记录
- 细粒度功能权限控制，可针对特定用户分配特定权限

### 14.12 通用设计
- 统一的导航栏
- 响应式设计，适配不同屏幕尺寸
- 现代化UI风格，参考Ant Design设计规范
- 良好的用户体验，操作流程清晰 